{
    "status": 200,
    "url": "https://api.github.com/repos/Chakrygin/test-github-action/commits/refs%2Fheads%2Fmain",
    "headers": {
        "access-control-allow-origin": "*",
        "access-control-expose-headers": "ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset",
        "cache-control": "private, max-age=60, s-maxage=60",
        "connection": "close",
        "content-encoding": "gzip",
        "content-security-policy": "default-src 'none'",
        "content-type": "application/json; charset=utf-8",
        "date": "Sun, 20 Feb 2022 13:25:50 GMT",
        "etag": "W/\"ed4751af2855bf1e498748e593d1a72263e00278048957e45ad6a583c2476931\"",
        "last-modified": "Sun, 20 Feb 2022 13:25:33 GMT",
        "referrer-policy": "origin-when-cross-origin, strict-origin-when-cross-origin",
        "server": "GitHub.com",
        "strict-transport-security": "max-age=31536000; includeSubdomains; preload",
        "transfer-encoding": "chunked",
        "vary": "Accept, Authorization, Cookie, X-GitHub-OTP, Accept-Encoding, Accept, X-Requested-With",
        "x-content-type-options": "nosniff",
        "x-frame-options": "deny",
        "x-github-media-type": "github.v3; format=json",
        "x-github-request-id": "07C1:66FE:72DC7E:D88E47:6212415E",
        "x-ratelimit-limit": "1000",
        "x-ratelimit-remaining": "992",
        "x-ratelimit-reset": "1645364993",
        "x-ratelimit-resource": "core",
        "x-ratelimit-used": "8",
        "x-xss-protection": "0"
    },
    "data": {
        "sha": "6fa40b8e08e1688b4601eea06d84f20142568b25",
        "node_id": "C_kwDOG34LgNoAKDZmYTQwYjhlMDhlMTY4OGI0NjAxZWVhMDZkODRmMjAxNDI1NjhiMjU",
        "commit": {
            "author": {
                "name": "Igor Chakrygin",
                "email": "igor@chakrygin.ru",
                "date": "2022-02-20T13:25:33Z"
            },
            "committer": {
                "name": "Igor Chakrygin",
                "email": "igor@chakrygin.ru",
                "date": "2022-02-20T13:25:33Z"
            },
            "message": "test",
            "tree": {
                "sha": "b922546c38aa09d1faa921d8b33123af40b10fab",
                "url": "https://api.github.com/repos/Chakrygin/test-github-action/git/trees/b922546c38aa09d1faa921d8b33123af40b10fab"
            },
            "url": "https://api.github.com/repos/Chakrygin/test-github-action/git/commits/6fa40b8e08e1688b4601eea06d84f20142568b25",
            "comment_count": 0,
            "verification": {
                "verified": false,
                "reason": "unsigned",
                "signature": null,
                "payload": null
            }
        },
        "url": "https://api.github.com/repos/Chakrygin/test-github-action/commits/6fa40b8e08e1688b4601eea06d84f20142568b25",
        "html_url": "https://github.com/Chakrygin/test-github-action/commit/6fa40b8e08e1688b4601eea06d84f20142568b25",
        "comments_url": "https://api.github.com/repos/Chakrygin/test-github-action/commits/6fa40b8e08e1688b4601eea06d84f20142568b25/comments",
        "author": {
            "login": "Chakrygin",
            "id": 6216874,
            "node_id": "MDQ6VXNlcjYyMTY4NzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6216874?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Chakrygin",
            "html_url": "https://github.com/Chakrygin",
            "followers_url": "https://api.github.com/users/Chakrygin/followers",
            "following_url": "https://api.github.com/users/Chakrygin/following{/other_user}",
            "gists_url": "https://api.github.com/users/Chakrygin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Chakrygin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Chakrygin/subscriptions",
            "organizations_url": "https://api.github.com/users/Chakrygin/orgs",
            "repos_url": "https://api.github.com/users/Chakrygin/repos",
            "events_url": "https://api.github.com/users/Chakrygin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Chakrygin/received_events",
            "type": "User",
            "site_admin": false
        },
        "committer": {
            "login": "Chakrygin",
            "id": 6216874,
            "node_id": "MDQ6VXNlcjYyMTY4NzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6216874?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Chakrygin",
            "html_url": "https://github.com/Chakrygin",
            "followers_url": "https://api.github.com/users/Chakrygin/followers",
            "following_url": "https://api.github.com/users/Chakrygin/following{/other_user}",
            "gists_url": "https://api.github.com/users/Chakrygin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Chakrygin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Chakrygin/subscriptions",
            "organizations_url": "https://api.github.com/users/Chakrygin/orgs",
            "repos_url": "https://api.github.com/users/Chakrygin/repos",
            "events_url": "https://api.github.com/users/Chakrygin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Chakrygin/received_events",
            "type": "User",
            "site_admin": false
        },
        "parents": [
            {
                "sha": "531544d387f3b5a188943e86e7f63543e0dd23fa",
                "url": "https://api.github.com/repos/Chakrygin/test-github-action/commits/531544d387f3b5a188943e86e7f63543e0dd23fa",
                "html_url": "https://github.com/Chakrygin/test-github-action/commit/531544d387f3b5a188943e86e7f63543e0dd23fa"
            }
        ],
        "stats": {
            "total": 59,
            "additions": 26,
            "deletions": 33
        },
        "files": [
            {
                "sha": "af0aa11a6df3ec735d6c5f888445b3819ca3055c",
                "filename": ".github/actions/test/dist/index.js",
                "status": "modified",
                "additions": 12,
                "deletions": 15,
                "changes": 27,
                "blob_url": "https://github.com/Chakrygin/test-github-action/blob/6fa40b8e08e1688b4601eea06d84f20142568b25/.github/actions/test/dist/index.js",
                "raw_url": "https://github.com/Chakrygin/test-github-action/raw/6fa40b8e08e1688b4601eea06d84f20142568b25/.github/actions/test/dist/index.js",
                "contents_url": "https://api.github.com/repos/Chakrygin/test-github-action/contents/.github/actions/test/dist/index.js?ref=6fa40b8e08e1688b4601eea06d84f20142568b25",
                "patch": "@@ -10023,6 +10023,7 @@ var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _argume\n const GITHUB_TOKEN = _actions_core__WEBPACK_IMPORTED_MODULE_0__.getInput('GITHUB_TOKEN');\n const TELEGRAM_TOKEN = _actions_core__WEBPACK_IMPORTED_MODULE_0__.getInput('TELEGRAM_TOKEN');\n function main() {\n+    var _a, _b;\n     return __awaiter(this, void 0, void 0, function* () {\n         try {\n             // const telegraf = new Telegraf(TELEGRAM_TOKEN);\n@@ -10076,19 +10077,15 @@ function main() {\n             console.log(json);\n             console.log();\n             fs__WEBPACK_IMPORTED_MODULE_3__.writeFileSync(\"test/context.txt\", json);\n-            try {\n-                var commit = yield octokit.repos.getCommit({\n-                    owner: _actions_github__WEBPACK_IMPORTED_MODULE_1__.context.repo.owner,\n-                    repo: _actions_github__WEBPACK_IMPORTED_MODULE_1__.context.repo.repo,\n-                    ref: _actions_github__WEBPACK_IMPORTED_MODULE_1__.context.ref,\n-                });\n-                const json2 = JSON.stringify(commit, null, 4);\n-                console.log(json2);\n-                console.log();\n-                fs__WEBPACK_IMPORTED_MODULE_3__.writeFileSync(\"test/commit.txt\", json2);\n-            }\n-            catch (_a) {\n-            }\n+            var commit = yield octokit.repos.getCommit({\n+                owner: _actions_github__WEBPACK_IMPORTED_MODULE_1__.context.repo.owner,\n+                repo: _actions_github__WEBPACK_IMPORTED_MODULE_1__.context.repo.repo,\n+                ref: _actions_github__WEBPACK_IMPORTED_MODULE_1__.context.ref,\n+            });\n+            const json2 = JSON.stringify(commit, null, 4);\n+            console.log(json2);\n+            console.log();\n+            fs__WEBPACK_IMPORTED_MODULE_3__.writeFileSync(\"test/commit.txt\", json2);\n             const options = {};\n             options.listeners = {\n                 stdout: (data) => {\n@@ -10100,8 +10097,8 @@ function main() {\n             };\n             var owner = _actions_github__WEBPACK_IMPORTED_MODULE_1__.context.repo.owner;\n             var repo = _actions_github__WEBPACK_IMPORTED_MODULE_1__.context.repo.repo;\n-            yield _actions_exec__WEBPACK_IMPORTED_MODULE_2__.exec('git', [\"config\", \"--global\", \"user.name\", \"Automated Publisher\"], options);\n-            yield _actions_exec__WEBPACK_IMPORTED_MODULE_2__.exec('git', [\"config\", \"--global\", \"user.email\", \"actions@users.noreply.github.com\"], options);\n+            yield _actions_exec__WEBPACK_IMPORTED_MODULE_2__.exec('git', [\"config\", \"--global\", \"user.name\", (_a = commit.data.commit.author) === null || _a === void 0 ? void 0 : _a.name], options);\n+            yield _actions_exec__WEBPACK_IMPORTED_MODULE_2__.exec('git', [\"config\", \"--global\", \"user.email\", (_b = commit.data.commit.author) === null || _b === void 0 ? void 0 : _b.email], options);\n             yield _actions_exec__WEBPACK_IMPORTED_MODULE_2__.exec('git', [\"add\", \"--all\"]);\n             yield _actions_exec__WEBPACK_IMPORTED_MODULE_2__.exec('git', [\"commit\", \"-m\", \"Commit message...\"], options);\n             yield _actions_exec__WEBPACK_IMPORTED_MODULE_2__.exec('git', [\"remote\", \"set-url\", \"origin\", `https://x-access-token:${GITHUB_TOKEN}@github.com/${owner}/${repo}`], options);"
            },
            {
                "sha": "627911d3d675455e71c98934094bf0795c558376",
                "filename": ".github/actions/test/src/main.ts",
                "status": "modified",
                "additions": 14,
                "deletions": 18,
                "changes": 32,
                "blob_url": "https://github.com/Chakrygin/test-github-action/blob/6fa40b8e08e1688b4601eea06d84f20142568b25/.github/actions/test/src/main.ts",
                "raw_url": "https://github.com/Chakrygin/test-github-action/raw/6fa40b8e08e1688b4601eea06d84f20142568b25/.github/actions/test/src/main.ts",
                "contents_url": "https://api.github.com/repos/Chakrygin/test-github-action/contents/.github/actions/test/src/main.ts?ref=6fa40b8e08e1688b4601eea06d84f20142568b25",
                "patch": "@@ -91,22 +91,17 @@ async function main() {\n \n     fs.writeFileSync(\"test/context.txt\", json)\n \n-    try {\n-      var commit = await octokit.repos.getCommit({\n-        owner: github.context.repo.owner,\n-        repo: github.context.repo.repo,\n-        ref: github.context.ref,\n-      });\n-\n-      const json2 = JSON.stringify(commit, null, 4);\n-      console.log(json2);\n-      console.log();\n-\n-      fs.writeFileSync(\"test/commit.txt\", json2)\n-    }\n-    catch\n-    {\n-    }\n+    var commit = await octokit.repos.getCommit({\n+      owner: github.context.repo.owner,\n+      repo: github.context.repo.repo,\n+      ref: github.context.ref,\n+    });\n+\n+    const json2 = JSON.stringify(commit, null, 4);\n+    console.log(json2);\n+    console.log();\n+\n+    fs.writeFileSync(\"test/commit.txt\", json2)\n \n     const options: exec.ExecOptions = {};\n     options.listeners = {\n@@ -121,8 +116,9 @@ async function main() {\n     var owner = github.context.repo.owner;\n     var repo = github.context.repo.repo;\n \n-    await exec.exec('git', [\"config\", \"--global\", \"user.name\", \"Automated Publisher\"], options);\n-    await exec.exec('git', [\"config\", \"--global\", \"user.email\", \"actions@users.noreply.github.com\"], options);\n+\n+    await exec.exec('git', [\"config\", \"--global\", \"user.name\", commit.data.commit.author?.name!], options);\n+    await exec.exec('git', [\"config\", \"--global\", \"user.email\", commit.data.commit.author?.email!], options);\n     await exec.exec('git', [\"add\", \"--all\"]);\n     await exec.exec('git', [\"commit\", \"-m\", \"Commit message...\"], options);\n     await exec.exec('git', [\"remote\", \"set-url\", \"origin\", `https://x-access-token:${GITHUB_TOKEN}@github.com/${owner}/${repo}`], options);"
            }
        ]
    }
}